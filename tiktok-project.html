<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok → MP4 変換ツール - プロジェクト詳細</title>
    <meta name="description" content="高可用性フォールバック設計によるTikTok動画ダウンロードWebアプリケーション">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ナビゲーション -->
    <nav class="navigation" id="navigation">
        <div class="nav-content">
            <a href="index.html" class="nav-brand" aria-label="ホームに戻る">鈴木皆人</a>
            
            <ul class="nav-links" role="menubar">
                <li role="none"><a href="index.html#home" class="nav-link" role="menuitem">ホーム</a></li>
                <li role="none"><a href="index.html#projects" class="nav-link active" role="menuitem">プロジェクト</a></li>
                <li role="none"><a href="index.html#about" class="nav-link" role="menuitem">プロフィール</a></li>
                <li role="none"><a href="index.html#contact" class="nav-link" role="menuitem">コンタクト</a></li>
            </ul>
            
            <div class="contact-dropdown">
                <button class="button button-primary tappable contact-trigger" aria-label="お問い合わせ方法を選択" aria-expanded="false">
                    お問い合わせ
                    <span class="dropdown-icon">▾</span>
                </button>
                <div class="contact-options" role="menu" aria-hidden="true">
                    <a href="mailto:minato2ban@icloud.com?subject=ポートフォリオサイトからのお問い合わせ&body=はじめまして。%0D%0A%0D%0Aお名前：%0D%0Aご用件：%0D%0A%0D%0Aよろしくお願いいたします。" 
                       class="contact-option" role="menuitem">
                        <span class="contact-icon">✉️</span>
                        メールアプリで開く
                    </a>
                    <button class="contact-option copy-email-btn" role="menuitem" data-email="minato2ban@icloud.com">
                        <span class="contact-icon">📋</span>
                        メールアドレスをコピー
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <!-- プロジェクトヒーロー -->
        <section class="project-hero section">
            <div class="container">
                <a href="index.html#projects" class="back-button">プロジェクト一覧に戻る</a>
                
                <h1>TikTok → MP4 変換ツール</h1>
                <p class="hero-subtitle">順次フォールバックとシンプルなUI</p>
                
                <p class="hero-description">
                    TikTok動画URLからMP4を保存するシンプルなWebアプリです。無料のAPIを順番に試し、取得できた動画URLをサーバー側でストリーム保存してからダウンロードリンクを返します。
                </p>
            </div>
        </section>

        <!-- プロジェクト詳細 -->
        <section class="section">
            <div class="container">
                <!-- プロジェクトメタ情報 -->
                <div class="project-meta">
                    <div class="project-meta-item">
                        <div class="project-meta-label">プロジェクト期間</div>
                        <div class="project-meta-value">2024年前半</div>
                    </div>
                    
                    <div class="project-meta-item">
                        <div class="project-meta-label">役割</div>
                        <div class="project-meta-value">フルスタック開発・インフラ設計</div>
                    </div>
                    
                    <div class="project-meta-item">
                        <div class="project-meta-label">プロジェクト種別</div>
                        <div class="project-meta-value">個人開発・実用ツール</div>
                    </div>
                </div>

                <!-- 課題と解決アプローチ -->
                <div class="grid grid-2" style="margin-top: var(--space-8);">
                    <div>
                        <h2>解決したい課題</h2>
                        <p>TikTok動画のダウンロードは需要があるものの、既存サービスには以下の課題がありました：</p>
                        
                        <ul class="feature-list">
                            <li>外部サービスのダウンタイムによる利用不可</li>
                            <li>広告やポップアップが多すぎる</li>
                            <li>ダウンロード速度が遅い・不安定</li>
                            <li>モバイル対応が不十分</li>
                            <li>プライバシーやセキュリティの懸念</li>
                            <li>ファイル形式・品質の選択肢が限定的</li>
                        </ul>
                    </div>

                    <div>
                        <h2>技術的アプローチ</h2>
                        <p>外部の無料APIを順番に呼び出し、最初に取得できた動画URLを使う素直な実装です：</p>
                        
                        <div class="highlight-box">
                            <h4>順次フォールバック</h4>
                            <p>TikWM → SSSTik → SnapTik → TiklyDown の順で試行</p>
                        </div>
                        
                        <div class="highlight-box">
                            <h4>ストリーム保存</h4>
                            <p>取得した動画URLをサーバーでストリームしてmp4に保存</p>
                        </div>
                        
                        <div class="highlight-box">
                            <h4>エラーハンドリング</h4>
                            <p>失敗時は次のAPIへ切替。最終的に失敗ならメッセージを返します</p>
                        </div>
                    </div>
                </div>

                <!-- システム設計詳細 -->
                <div style="margin-top: var(--space-8);">
                    <h2>システムアーキテクチャと主要機能</h2>
                    
                    <div class="grid grid-auto" style="margin-top: var(--space-6);">
                        <div class="card">
                            <h3>多層フォールバック機能</h3>
                            <p>外部APIを固定の順序で呼び出します：</p>
                            <ul class="feature-list">
                                <li><strong>順序:</strong> TikWM → SSSTik → SnapTik → TiklyDown</li>
                                <li><strong>条件:</strong> 先に成功したAPIの動画URLを採用</li>
                                <li><strong>タイムアウト:</strong> 各API 15秒</li>
                            </ul>
                        </div>

                        <div class="card">
                            <h3>ストリーム最適化処理</h3>
                            <p>Node.jsのストリームでファイルを保存：</p>
                            <ul class="feature-list">
                                <li><strong>HTTP GET (stream):</strong> axiosのresponseType=stream</li>
                                <li><strong>保存先:</strong> downloads/ ディレクトリ</li>
                                <li><strong>ファイル名:</strong> タイトル+タイムスタンプ+短いUUID</li>
                            </ul>
                        </div>

                        <div class="card">
                            <h3>ユーザビリティ・UI設計</h3>
                            <p>必要最小限のUI：</p>
                            <ul class="feature-list">
                                <li><strong>URL入力 → 変換開始</strong> の2アクション</li>
                                <li><strong>結果表示:</strong> タイトル/作者/画質/ファイル名</li>
                                <li><strong>ダウンロードリンク:</strong> /downloads/{file} を返却</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 小さな工夫と学び -->
                <div style="margin-top: var(--space-8);">
                    <h2>小さな工夫と学び</h2>
                    
                    <div class="grid grid-2">
                        <div>
                            <h3>外部APIの失敗に備える</h3>
                            <div class="highlight-box">
                                <h4>課題</h4>
                                <p>外部サービスが失敗することがある</p>
                            </div>
                            <div class="highlight-box">
                                <h4>対処</h4>
                                <ul class="feature-list">
                                    <li>1つ失敗したら次のAPIを試すだけのシンプル設計</li>
                                    <li>各リクエストにタイムアウトを設定</li>
                                </ul>
                            </div>
                        </div>

                        <div>
                            <h3>保存と命名</h3>
                            <div class="highlight-box">
                                <h4>課題</h4>
                                <p>大きな動画ファイルを安全に保存したい</p>
                            </div>
                            <div class="highlight-box">
                                <h4>対処</h4>
                                <ul class="feature-list">
                                    <li>Node.jsのストリームAPIで逐次書き込み</li>
                                    <li>タイトルを整形し、タイムスタンプ+短いUUIDで一意化</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- エラーハンドリング戦略 -->
                <div style="margin-top: var(--space-8);">
                    <h2>エラーハンドリング</h2>
                    
                    <div class="grid grid-auto" style="margin-top: var(--space-6);">
                        <div class="card">
                            <h3>段階的フォールバック</h3>
                            <ul class="feature-list">
                                <li>1つのAPIが失敗したら、次のAPIを試す</li>
                                <li>すべて失敗したらエラーメッセージを返す</li>
                            </ul>
                        </div>

                        <div class="card">
                            <h3>ユーザー通知</h3>
                            <ul class="feature-list">
                                <li>失敗理由（タイムアウトなど）を簡潔に表示</li>
                                <li>再試行ボタンで最初からやり直し</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 使用技術 -->
                <div style="margin-top: var(--space-8);">
                    <h2>使用技術</h2>
                    
                    <div class="grid grid-2">
                        <div>
                            <h3>バックエンド</h3>
                            <div class="skill-tags">
                                <span class="skill-tag">Node.js</span>
                                <span class="skill-tag">Express</span>
                                <span class="skill-tag">axios</span>
                                <span class="skill-tag">uuid</span>
                                <span class="skill-tag">CORS</span>
                            </div>
                        </div>

                        <div>
                            <h3>フロントエンド・UI</h3>
                            <div class="skill-tags">
                                <span class="skill-tag">JavaScript</span>
                                <span class="skill-tag">HTML/CSS</span>
                                <span class="skill-tag">Fetch API</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 実装の工夫 -->
                <div class="highlight-box" style="margin-top: var(--space-8);">
                    <h4>実装で工夫したポイント</h4>
                    <p>このプロジェクトでは「<strong>ユーザーが失敗を感じない</strong>」ことを最重要視しました。技術的には単純な動画ダウンロードですが、フォールバック機能によりAPIの障害を隠蔽し、ストリーム処理で体感速度を向上、丁寧なエラーハンドリングでユーザビリティを担保。<strong>「当たり前に動く」の裏にある技術的工夫</strong>を重視したプロジェクトです。</p>
                </div>

                <!-- 成果と学び -->
                <div style="margin-top: var(--space-8);">
                    <h2>成果と学び</h2>
                    
                    <div class="grid grid-2">
                        <div>
                            <h3>プロジェクトの成果</h3>
                            <ul class="feature-list">
                                <li>URL入力からMP4保存までを最小構成で実装</li>
                                <li>無料APIの順次フォールバックで成功率を素直に担保</li>
                                <li>タイトル整形と一意なファイル名生成を標準化</li>
                            </ul>
                        </div>

                        <div>
                            <h3>技術的な学び</h3>
                            <ul class="feature-list">
                                <li>外部APIの失敗を前提にした単純なフォールバックの有効性</li>
                                <li>Node.jsストリームでの安全なファイル保存</li>
                                <li>タイムアウトと例外処理の基本設計</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- システム詳細図 -->
                <div style="margin-top: var(--space-8);">
                    <h2>システムフロー</h2>
                    <div class="card" style="margin-top: var(--space-4);">
                        <div style="text-align: center; font-family: monospace; line-height: 1.8;">
                            <div>1. User Input URL</div>
                            <div>↓</div>
                            <div>2. Validate (tiktok.com を含むか確認)</div>
                            <div>↓</div>
                            <div>3. Try TikWM</div>
                            <div>↓ 失敗なら</div>
                            <div>4. Try SSSTik</div>
                            <div>↓ 失敗なら</div>
                            <div>5. Try SnapTik</div>
                            <div>↓ 失敗なら</div>
                            <div>6. Try TiklyDown</div>
                            <div>↓ 成功</div>
                            <div>7. axios(stream) → downloads/{file}.mp4 に保存</div>
                            <div>↓</div>
                            <div>8. /downloads/{file} を返す</div>
                        </div>
                    </div>
                </div>

                <!-- 最終プロジェクトリンク -->
                <div style="margin-top: var(--space-8); text-align: center;">
                    <div class="flex flex-center flex-gap">
                        <a href="veo3-project.html" class="button button-secondary">
                            Veo3動画生成ツール
                        </a>
                        <a href="neuro-project.html" class="button button-secondary">
                            脳神経科学アプリ
                        </a>
                        <a href="index.html#projects" class="button button-primary">
                            全プロジェクトに戻る
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- フッター -->
    <footer style="background: var(--bg-elev); padding: var(--space-6) 0; text-align: center; border-top: 1px solid var(--border);">
        <div class="container">
            <p class="text-caption">
                © 2025 鈴木皆人（Minato Suzuki）. All rights reserved.
            </p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>

